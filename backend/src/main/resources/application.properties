# --- HTTP Server ---
quarkus.http.port=8080

# --- DB ---
quarkus.datasource.db-kind=postgresql
quarkus.datasource.jdbc.url=jdbc:postgresql://localhost:5432/freshplan
quarkus.datasource.username=freshplan
quarkus.datasource.password=freshplan
quarkus.hibernate-orm.database.generation=validate

# Schema-Validation wieder aktiviert - Schema ist stabil
%dev.quarkus.hibernate-orm.database.generation=validate
quarkus.flyway.migrate-at-start=true

# --- OIDC ---
# Production: https://auth.z-catering.de/realms/freshplan-realm
# Development: http://localhost:8180/realms/freshplan-realm
quarkus.oidc.auth-server-url=${KEYCLOAK_URL:http://localhost:8180}/realms/${KEYCLOAK_REALM:freshplan-realm}
quarkus.oidc.client-id=${KEYCLOAK_CLIENT_ID:freshplan-backend}
quarkus.oidc.credentials.secret=${KEYCLOAK_CLIENT_SECRET:secret}
quarkus.oidc.application-type=service
quarkus.oidc.tls.verification=certificate-validation

# Dev mode: Disable authentication for development
%dev.quarkus.oidc.enabled=false
%dev.quarkus.security.auth.enabled-in-dev-mode=false

# Test mode: Disable authentication for tests
%test.quarkus.oidc.enabled=false
%test.quarkus.http.auth.basic=false
%test.quarkus.http.auth.form.enabled=false

# --- CORS (f√ºr Vite Dev) ---
quarkus.http.cors=true
quarkus.http.cors.origins=http://localhost:5173,http://192.168.1.42:5173,http://127.0.0.1:5173
quarkus.http.cors.methods=GET,POST,PUT,DELETE,OPTIONS,HEAD,PATCH
quarkus.http.cors.headers=accept,authorization,content-type,x-requested-with,origin
quarkus.http.cors.exposed-headers=location,content-disposition
quarkus.http.cors.access-control-allow-credentials=true
quarkus.http.cors.access-control-max-age=86400

# --- OpenAPI ---
quarkus.smallrye-openapi.path=/openapi
quarkus.swagger-ui.always-include=true

# --- Flyway Baseline ---
quarkus.flyway.baseline-on-migrate=true
