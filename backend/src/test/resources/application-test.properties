# Test-specific configuration
quarkus.datasource.db-kind=postgresql
quarkus.datasource.username=freshplan
quarkus.datasource.password=freshplan

# CRITICAL: Disable DevServices for CI
quarkus.datasource.devservices.enabled=false

# Standard JDBC URL ohne CI-Flags
quarkus.datasource.jdbc.url=jdbc:postgresql://localhost:5432/freshplan

# Flyway configuration for test
quarkus.flyway.migrate-at-start=true
# CRITICAL: Enable clean to ensure fresh DB state in tests
quarkus.flyway.clean-disabled=false
quarkus.flyway.clean-at-start=true
quarkus.flyway.repair-at-start=true
# Nur noch Standard-Migrationen - keine SEED-Daten mehr
quarkus.flyway.locations=classpath:db/migration
# No Hibernate schema generation - let Flyway handle everything
quarkus.hibernate-orm.database.generation=none

# Transaction configuration for tests
# Increase timeout to prevent Transaction Reaper warnings
quarkus.transaction-manager.default-transaction-timeout=120s
# Disable transaction reaper warnings in tests
quarkus.log.category."com.arjuna.ats.arjuna".level=ERROR

# Logging
quarkus.log.level=INFO
quarkus.log.category."de.freshplan".level=DEBUG
# Enhanced Flyway logging to see callbacks
quarkus.log.category."org.flywaydb".level=DEBUG
quarkus.log.category."org.flywaydb.core.internal.callback".level=DEBUG

# Security configuration for tests
# Disable SecurityContextFilter for service tests without HTTP
app.security.context-filter.enabled=false