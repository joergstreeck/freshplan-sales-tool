<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="FreshPlan Sales Tool - Professionelles Rabattsystem für Großkunden">
    <meta name="theme-color" content="#004f7b">
    
    <title>FreshPlan Sales Tool</title>
    
    <!-- Preconnect to external domains -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <link rel="alternate icon" href="/favicon.ico">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Antonio:wght@700&family=Poppins:wght@400;500;700&display=swap" rel="stylesheet">
    
    <!-- Styles -->
    <link rel="stylesheet" href="/css/variables.css">
    <link rel="stylesheet" href="/css/layout.css">
    <link rel="stylesheet" href="/css/components.css">
    <link rel="stylesheet" href="/css/responsive.css">
    
    <!-- Critical CSS (will be inlined by Vite in production) -->
    <style>
        /* Critical inline styles for faster initial render */
        body {
            margin: 0;
            font-family: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f5f5;
            color: #333;
        }
        
        /* Loading screen */
        .app-loading {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            background: white;
            z-index: 9999;
        }
        
        .app-loading-content {
            text-align: center;
        }
        
        .app-loading-spinner {
            width: 50px;
            height: 50px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #004f7b;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .app-loading-text {
            color: #666;
            font-size: 16px;
        }
        
        /* Hide app content until loaded */
        #app:not(.loaded) {
            display: none;
        }
        
        /* Hidden class */
        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading" class="app-loading">
        <div class="app-loading-content">
            <div class="app-loading-spinner"></div>
            <div class="app-loading-text">FreshPlan wird geladen...</div>
        </div>
    </div>

    <!-- Main App Container -->
    <div id="app">
        <!-- App Header -->
        <header class="header">
            <div class="header-container">
                <h1 class="logo">
                    <svg class="logo-icon" width="32" height="32" viewBox="0 0 32 32" fill="currentColor">
                        <path d="M16 2C8.268 2 2 8.268 2 16s6.268 14 14 14 14-6.268 14-14S23.732 2 16 2zm0 4c5.514 0 10 4.486 10 10s-4.486 10-10 10S6 21.514 6 16 10.486 6 16 6zm-2 4v8.586l5.707 5.707 1.414-1.414L16 17.758V10h-2z"/>
                    </svg>
                    FreshPlan
                    <span class="logo-subtitle">Sales Tool</span>
                </h1>
                
                <div class="header-actions">
                    <button class="lang-btn" data-action="language">
                        <span data-i18n="language.switch">DE</span>
                    </button>
                </div>
            </div>
        </header>

        <!-- Navigation Tabs -->
        <nav class="nav-tabs" role="tablist">
            <button class="nav-tab active" role="tab" data-tab="demonstrator" aria-selected="true">
                <span data-i18n="nav.demonstrator">Rabattrechner</span>
            </button>
            <button class="nav-tab" role="tab" data-tab="customer" aria-selected="false">
                <span data-i18n="nav.customer">Kundendaten</span>
            </button>
            <button class="nav-tab hidden" role="tab" data-tab="locations" aria-selected="false">
                <span data-i18n="nav.locations">Standorte</span>
            </button>
            <button class="nav-tab hidden" role="tab" data-tab="locationDetails" aria-selected="false">
                <span data-i18n="nav.locationDetails">Standort-Details</span>
            </button>
            <button class="nav-tab" role="tab" data-tab="profile" aria-selected="false">
                <span data-i18n="nav.profile">Profil</span>
            </button>
            <button class="nav-tab" role="tab" data-tab="offer" aria-selected="false">
                <span data-i18n="nav.offer">Angebot</span>
            </button>
            <button class="nav-tab" role="tab" data-tab="settings" aria-selected="false">
                <span data-i18n="nav.settings">Einstellungen</span>
            </button>
        </nav>

        <!-- Main Content Container -->
        <main class="main-container">
            <!-- Demonstrator Tab -->
            <div id="tab-demonstrator" class="tab-content active" role="tabpanel">
                <div class="demonstrator-container">
                    <!-- Info Section -->
                    <div class="info-section">
                        <!-- Scenarios -->
                        <div class="scenarios-container">
                            <h2 data-i18n="calculator.scenarios">Szenarien</h2>
                            <div class="scenario-grid" id="scenarioGrid">
                                <!-- Scenarios will be inserted here -->
                            </div>
                        </div>
                        
                        <!-- Info Cards -->
                        <div class="info-cards">
                            <div class="info-card">
                                <h3 data-i18n="info.chain.title">Kettenkunden</h3>
                                <p data-i18n="info.chain.description">Bei Kettenkunden profitieren Sie von der Bündelung mehrerer Standorte.</p>
                            </div>
                            <div class="info-card">
                                <h3 data-i18n="info.pickup.title">Abholung</h3>
                                <p data-i18n="info.pickup.description">Bei Selbstabholung sparen Sie zusätzlich 2% (ab 5.000€).</p>
                            </div>
                        </div>
                        
                        <!-- Discount Scale -->
                        <div class="discount-scale">
                            <h3 data-i18n="info.scale.title">Rabattstaffel</h3>
                            <div class="scale-grid">
                                <div class="scale-item">
                                    <span class="scale-label">ab 5.000€</span>
                                    <span class="scale-value">3%</span>
                                </div>
                                <div class="scale-item">
                                    <span class="scale-label">ab 15.000€</span>
                                    <span class="scale-value">6%</span>
                                </div>
                                <div class="scale-item">
                                    <span class="scale-label">ab 30.000€</span>
                                    <span class="scale-value">8%</span>
                                </div>
                                <div class="scale-item">
                                    <span class="scale-label">ab 50.000€</span>
                                    <span class="scale-value">9%</span>
                                </div>
                                <div class="scale-item">
                                    <span class="scale-label">ab 75.000€</span>
                                    <span class="scale-value">10%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Calculator Section -->
                    <div class="calculator-section">
                        <h2 data-i18n="calculator.title">Rabattrechner</h2>
                        
                        <!-- Order Value Slider -->
                        <div class="slider-group">
                            <label class="slider-label">
                                <span data-i18n="calculator.orderValue">Bestellwert</span>
                                <span class="slider-value" id="orderValueDisplay">€15.000</span>
                            </label>
                            <input type="range" id="orderValueSlider" class="slider" 
                                   min="1000" max="100000" step="1000" value="15000">
                        </div>
                        
                        <!-- Lead Time Slider -->
                        <div class="slider-group">
                            <label class="slider-label">
                                <span data-i18n="calculator.leadTime">Vorlaufzeit</span>
                                <span class="slider-value" id="leadTimeDisplay">14 Tage</span>
                            </label>
                            <input type="range" id="leadTimeSlider" class="slider" 
                                   min="1" max="30" step="1" value="14">
                        </div>
                        
                        <!-- Options -->
                        <div class="options-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="pickupCheckbox" class="checkbox">
                                <span data-i18n="calculator.pickup">Abholung</span>
                            </label>
                        </div>
                        
                        <!-- Results -->
                        <div class="results-container">
                            <div class="result-grid">
                                <div class="result-item">
                                    <span class="result-label" data-i18n="calculator.baseDiscount">Basisrabatt</span>
                                    <span class="result-value" id="baseDiscount">6%</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label" data-i18n="calculator.earlyDiscount">Frühbucher</span>
                                    <span class="result-value" id="earlyDiscount">1%</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label" data-i18n="calculator.pickupDiscount">Abholung</span>
                                    <span class="result-value" id="pickupDiscount">0%</span>
                                </div>
                            </div>
                            
                            <div class="total-discount">
                                <span data-i18n="calculator.totalDiscount">Gesamtrabatt</span>
                                <span class="total-value" id="totalDiscount">7%</span>
                            </div>
                            
                            <div class="savings-display">
                                <div class="savings-item">
                                    <span data-i18n="calculator.savings">Ersparnis</span>
                                    <span class="savings-value" id="savingsAmount">€1.050</span>
                                </div>
                                <div class="savings-item highlight">
                                    <span data-i18n="calculator.finalPrice">Endpreis</span>
                                    <span class="savings-value" id="finalPrice">€13.950</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Customer Tab -->
            <div id="tab-customer" class="tab-content" role="tabpanel">
                <!-- Customer content will be inserted here -->
            </div>

            <!-- Locations Tab -->
            <div id="tab-locations" class="tab-content" role="tabpanel">
                <!-- Locations content will be inserted here -->
            </div>

            <!-- Location Details Tab -->
            <div id="tab-locationDetails" class="tab-content" role="tabpanel">
                <!-- Location details content will be inserted here -->
            </div>

            <!-- Profile Tab -->
            <div id="tab-profile" class="tab-content" role="tabpanel">
                <!-- Profile content will be inserted here -->
            </div>

            <!-- Offer Tab -->
            <div id="tab-offer" class="tab-content" role="tabpanel">
                <!-- Offer content will be inserted here -->
            </div>

            <!-- Settings Tab -->
            <div id="tab-settings" class="tab-content" role="tabpanel">
                <!-- Settings content will be inserted here -->
            </div>
        </main>
    </div>

    <!-- Notifications Container -->
    <div id="notifications" class="notifications-container"></div>

    <!-- Autosave Indicator -->
    <div id="autosave-indicator" class="autosave-indicator hidden">
        <span data-i18n="autosave.saving">Speichern...</span>
    </div>

    <!-- Main Application Script -->
    <script type="module" src="./src/main.ts"></script>
</body>
</html>