<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The FreshPlan Way - Unser Weg zu exzellenter Software</title>
    <meta name="description" content="FreshPlan 2.0 Development Standards and Way of Working">
    <meta name="author" content="FreshPlan Team">
    <meta name="version" content="1.0">
    <meta name="updated" content="6.6.2025">
    
    <!-- Auto-refresh in development -->
    <script>
      if (location.hostname === 'localhost' || location.hostname === '127.0.0.1') {
        setTimeout(() => location.reload(), 30000); // Reload every 30s in dev
      }
    </script>
    
    <style>
        /* Previous styles remain the same */
        @page {
            size: A4;
            margin: 2cm;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 210mm;
            margin: 0 auto;
            padding: 20px;
        }
        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
            page-break-after: avoid;
        }
        h2 {
            color: #34495e;
            margin-top: 30px;
            border-bottom: 2px solid #ecf0f1;
            padding-bottom: 5px;
            page-break-after: avoid;
        }
        h3 {
            color: #7f8c8d;
            margin-top: 20px;
            page-break-after: avoid;
        }
        blockquote {
            border-left: 4px solid #3498db;
            padding-left: 20px;
            margin: 20px 0;
            font-style: italic;
            color: #555;
            background: #f8f9fa;
            padding: 15px 20px;
        }
        code {
            background: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 0.9em;
        }
        pre {
            background: #282c34;
            color: #abb2bf;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            page-break-inside: avoid;
        }
        pre code {
            background: none;
            color: inherit;
            padding: 0;
        }
        table {
            border-collapse: collapse;
            width: 100%;
            margin: 20px 0;
            page-break-inside: avoid;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        th {
            background-color: #3498db;
            color: white;
            font-weight: bold;
        }
        tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        ul, ol {
            margin: 15px 0;
            padding-left: 30px;
        }
        li {
            margin: 5px 0;
        }
        .toc {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }
        .toc h2 {
            margin-top: 0;
            border: none;
        }
        .toc ol {
            margin: 10px 0;
        }
        .page-break {
            page-break-after: always;
        }
        .highlight {
            background: #fff3cd;
            padding: 15px;
            border-left: 4px solid #ffb703;
            margin: 20px 0;
        }
        .footer {
            margin-top: 50px;
            padding-top: 20px;
            border-top: 1px solid #ddd;
            text-align: center;
            color: #666;
            font-size: 0.9em;
        }
        .updated-badge {
            position: fixed;
            top: 10px;
            right: 10px;
            background: #27ae60;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8em;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        @media print {
            body {
                font-size: 12pt;
            }
            h1 {
                font-size: 24pt;
            }
            h2 {
                font-size: 18pt;
            }
            h3 {
                font-size: 14pt;
            }
            .no-print, .updated-badge {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="updated-badge no-print">
        Aktualisiert: 6.6.2025
    </div>
    
    <!-- Content will be injected here by the update script -->
    <h1>The FreshPlan Way - Unser Weg zu exzellenter Software</h1>

<blockquote><strong>"Code, den jeder Entwickler sofort versteht - KEINE KOMPROMISSE!"</strong></blockquote>

<h2>🎯 Unsere Mission</h2>

Wir entwickeln FreshPlan 2.0 als moderne, cloud-native Enterprise-Lösung mit höchsten Qualitätsstandards. Dieses Dokument definiert unsere Arbeitsweise und ist für ALLE Projektbeteiligten verbindlich.

<h2>📋 Inhaltsverzeichnis</h2>

1. [Grundprinzipien](#grundprinzipien)
2. [Code-Qualität](#code-qualität)
3. [Architektur](#architektur)
4. [Development Workflow](#development-workflow)
5. [Testing](#testing)
6. [Security & Compliance](#security--compliance)
7. [DevOps & Releases](#devops--releases)
8. [Team-Rituale](#team-rituale)
9. [Aktueller Projektstatus](#aktueller-projektstatus)

---

<h2>Grundprinzipien</h2>

<h3>Die 5 Säulen unserer Entwicklung</h3>

1. <strong>Clean Code</strong> - Lesbarkeit geht vor Cleverness
2. <strong>SOLID Principles</strong> - Jede Klasse hat EINE klare Verantwortung
3. <strong>Test-Driven</strong> - Kein Code ohne Tests
4. <strong>Security-First</strong> - Sicherheit von Anfang an
5. <strong>Performance-Aware</strong> - Geschwindigkeit ist ein Feature

<h3>Unser Qualitätsversprechen</h3>

Bei jedem Commit verpflichten wir uns zu:

- <strong>Sauberkeit</strong>: Klare Modul-Grenzen, sprechende Namen, keine toten Pfade
- <strong>Robustheit</strong>: Umfassende Tests, defensives Error-Handling
- <strong>Wartbarkeit</strong>: SOLID, DRY, CI-Checks, lückenlose Dokumentation
- <strong>Transparenz</strong>: Unklarheiten sofort ansprechen

---

<h2>Code-Qualität</h2>

<h3>Naming Conventions</h3>

<table><tr><td>Element</td><td>Convention</td><td>Beispiel</td></tr>
</table>|---------|------------|----------|
<table><tr><td>Klassen</td><td>PascalCase</td><td><code>UserService</code>, <code>OrderRepository</code></td></tr>
<tr><td>Methoden</td><td>camelCase (Verben)</td><td><code>createUser</code>, <code>findByEmail</code></td></tr>
<tr><td>Variablen</td><td>camelCase (beschreibend)</td><td><code>userEmail</code>, <code>totalAmount</code></td></tr>
<tr><td>Konstanten</td><td>UPPER_SNAKE_CASE</td><td><code>MAX_RETRY_ATTEMPTS</code></td></tr>
<tr><td>Packages</td><td>lowercase, Singular</td><td><code>user</code>, <code>order</code></td></tr>
</table>
<h3>Code-Standards</h3>

<code>`</code>java
/**
 * Service layer for User management operations.
 * 
 * Clear purpose, clean API, comprehensive docs.
 * 
 * @since 2.0.0
 */
@ApplicationScoped
@Transactional
public class UserService {
    // Constructor Injection only
    private final UserRepository repository;
    
    // Clear method names, single responsibility
    public UserResponse createUser(CreateUserRequest request) {
        // 1. Validate
        // 2. Apply business rules
        // 3. Persist
        // 4. Return response
    }
}
<code>`</code>

<h3>Metriken</h3>

- <strong>Test Coverage</strong>: ≥ 80% für neue Features
- <strong>Cyclomatic Complexity</strong>: ≤ 10 pro Methode
- <strong>Method Length</strong>: ≤ 20 Zeilen
- <strong>Class Length</strong>: ≤ 200 Zeilen

---

<h2>Architektur</h2>

<h3>Backend (Quarkus/Java)</h3>

<code>`</code>
backend/
├── api/                    # REST Layer
│   └── exception/         # Exception Handling
├── domain/                # Business Domain
│   └── [aggregate]/      # z.B. user, order
│       ├── entity/       # JPA Entities
│       ├── repository/   # Data Access
│       ├── service/      # Business Logic
│       │   ├── dto/     # DTOs
│       │   └── mapper/  # Mappings
│       └── validation/   # Validators
└── infrastructure/        # Technical Details
<code>`</code>

<h3>Frontend (React/TypeScript)</h3>

<code>`</code>
frontend/
├── components/            # Reusable UI
│   ├── common/           # Generic
│   └── domain/           # Domain-specific
├── features/             # Feature Modules
│   └── [feature]/       
│       ├── components/   
│       ├── hooks/        
│       └── services/     
├── pages/                # Route Pages
└── services/             # Global Services
<code>`</code>

---

<h2>Development Workflow</h2>

<h3>Branch-Strategie</h3>

- <strong>Trunk-based Development</strong>: Feature Branches max. 24h
- <strong>Branch Naming</strong>: <code>feature/</code>, <code>bugfix/</code>, <code>hotfix/</code>
- <strong>Commit Convention</strong>: [Conventional Commits](https://www.conventionalcommits.org/)

<code>`</code>bash
<h1>Beispiel Workflow</h1>
git checkout -b feature/user-management
<h1>... Entwicklung ...</h1>
git commit -m "feat(user): Add email validation"
git push origin feature/user-management
<h1>Create Pull Request</h1>
<code>`</code>

<h3>Pull Request Checklist</h3>

- [ ] Tests sind grün (Coverage ≥ 80%)
- [ ] Keine Security Warnings
- [ ] Performance Budget eingehalten
- [ ] Dokumentation aktualisiert
- [ ] Code Review durch min. 1 Person
- [ ] Screenshots bei UI-Änderungen

---

<h2>Testing</h2>

<h3>Testing-Pyramide</h3>

<table><tr><td>Level</td><td>Coverage</td><td>Tools</td><td>Focus</td></tr>
</table>|-------|----------|-------|-------|
<table><tr><td>Unit</td><td>80%</td><td>JUnit/Vitest</td><td>Business Logic</td></tr>
<tr><td>Integration</td><td>100% API</td><td>RestAssured</td><td>Contracts</td></tr>
<tr><td>E2E</td><td>Happy Paths</td><td>Playwright</td><td>User Journeys</td></tr>
<tr><td>Performance</td><td>Critical</td><td>k6</td><td>Load Testing</td></tr>
</table>
<h3>Test-Pattern</h3>

<code>`</code>java
@Test
void createUser_withValidData_shouldReturnCreatedUser() {
    // Given - Arrange
    var request = validUserRequest();
    
    // When - Act
    var response = userService.createUser(request);
    
    // Then - Assert
    assertThat(response)
        .isNotNull()
        .hasFieldOrPropertyWithValue("username", "john.doe");
}
<code>`</code>

<h3>Feature Flag Governance</h3>

<strong>Trunk-based Development = Feature Flags sind PFLICHT!</strong>

#### Namenskonvention
<code>`</code>
ff_<ticket-nr>_<kurzer-name>
Beispiel: ff_FRESH-123_user_export
<code>`</code>

#### Regeln
- <strong>Sunset Date</strong>: Max. 30 Tage nach Erstellung
- <strong>Owner</strong>: Team/Person muss definiert sein
- <strong>Metrics</strong>: Jedes Flag braucht Monitoring
- <strong>Cleanup</strong>: Automatische Removal PRs

#### CI-Enforcement
- Flags > 30 Tage: ⚠️ Warning
- Flags > 60 Tage: ❌ Build Failure
- Ungenutztes Flag: 🤖 Auto-PR zur Entfernung

---

<h2>Security & Compliance</h2>

<h3>Security-Standards</h3>

<table><tr><td>Bereich</td><td>Maßnahme</td><td>Tool</td></tr>
</table>|---------|----------|------|
<table><tr><td>Dependencies</td><td>Vulnerability Scanning</td><td>Snyk/Dependabot</td></tr>
<tr><td>Code</td><td>SAST Analysis</td><td>SonarCloud</td></tr>
<tr><td>API</td><td>OWASP Top 10</td><td>ZAP</td></tr>
<tr><td>Secrets</td><td>Secret Scanning</td><td>GitGuardian</td></tr>
</table>
<h3>Compliance</h3>

- <strong>DSGVO</strong>: Verschlüsselung personenbezogener Daten
- <strong>Audit-Trail</strong>: Logging aller kritischen Operationen
- <strong>Data Retention</strong>: Automatische Löschfristen

---

<h2>DevOps & Releases</h2>

<h3>CI/CD Pipeline</h3>

<code>`</code>yaml
Stages:
1. Lint & Format
2. Unit Tests
3. Build
4. Integration Tests
5. Security Scan
6. Deploy Stage
7. E2E Tests
8. Performance Tests
9. Deploy Production (manual)
<code>`</code>

<h3>Release-Strategie</h3>

- <strong>Versioning</strong>: [Semantic Versioning](https://semver.org/)
- <strong>Releases</strong>: Automated via GitHub Actions
- <strong>Rollback</strong>: Immer möglich binnen 5 Minuten

<h3>Performance Budgets</h3>

#### Frontend
- Bundle Size: ≤ 200KB (gzipped)
- LCP: ≤ 2.5s
- Lighthouse Score: ≥ 90

#### Backend
- API Response: P95 < 200ms
- Startup Time: < 10s

---

<h2>Team-Rituale</h2>

<h3>Wöchentlicher Rhythmus</h3>

<table><tr><td>Tag</td><td>Aktivität</td><td>Dauer</td></tr>
</table>|-----|-----------|-------|
<table><tr><td>Montag</td><td>Sprint Planning</td><td>2h</td></tr>
<tr><td>Täglich</td><td>Standup</td><td>15min</td></tr>
<tr><td>Mittwoch</td><td>Tech Debt Review</td><td>1h</td></tr>
<tr><td>Freitag</td><td>Refactoring + Demo</td><td>3h</td></tr>
</table>
<h3>Knowledge Sharing</h3>

- <strong>Pair Programming</strong>: Min. 4h/Woche
- <strong>Tech Talks</strong>: Jeden 2. Freitag
- <strong>Documentation Day</strong>: 1x/Monat

<h3>Incident Management</h3>

#### Severity Matrix

<table><tr><td>Level</td><td>Impact</td><td>Beispiele</td><td>Response</td><td>Eskalation</td></tr>
</table>|-------|--------|-----------|----------|------------|
<table><tr><td><strong>SEV-1</strong></td><td>Totalausfall</td><td>Login down, Datenverlust, Security Breach</td><td>< 15 Min</td><td>CTO + On-Call</td></tr>
<tr><td><strong>SEV-2</strong></td><td>Major Feature</td><td>Payment kaputt, API > 5s, Keine Orders</td><td>< 1 Std</td><td>Team Lead</td></tr>
<tr><td><strong>SEV-3</strong></td><td>Minor Feature</td><td>PDF fehlt, Firefox Bug, Slow Query</td><td>< 4 Std</td><td>Team Slack</td></tr>
<tr><td><strong>SEV-4</strong></td><td>Kosmetik</td><td>Typo, Logging, Warnings</td><td>Sprint</td><td>Jira Ticket</td></tr>
</table>
#### On-Call
- Rotation: 1 Woche (Mo-So)
- Erreichbar: 30 Min
- Backup: Immer definiert
- Ausgleich: 1 Tag/Woche

---

<h2>Aktueller Projektstatus</h2>

<h3>Sprint 1: User Management (Aktuell)</h3>

<strong>Zeitraum</strong>: 06.01. - 09.01.2025

<strong>Ziele</strong>:
- [x] User Entity & Repository
- [ ] REST API für User CRUD
- [ ] Frontend User-Liste
- [ ] Keycloak Integration
- [ ] E2E Tests

<strong>Team</strong>:
- Backend: [Name]
- Frontend: [Name]
- DevOps: [Name]

<h3>Nächste Sprints</h3>

- <strong>Sprint 2</strong>: Customer Management Migration
- <strong>Sprint 3</strong>: Calculator Feature
- <strong>Sprint 4</strong>: PDF Generation

<h3>Metriken Dashboard</h3>

<table><tr><td>Metrik</td><td>Aktuell</td><td>Ziel</td></tr>
</table>|--------|---------|------|
<table><tr><td>Test Coverage</td><td>0%</td><td>80%</td></tr>
<tr><td>Tech Debt Ratio</td><td>0%</td><td><5%</td></tr>
<tr><td>Build Zeit</td><td>-</td><td><5min</td></tr>
<tr><td>Deploy Zeit</td><td>-</td><td><10min</td></tr>
</table>
---

<h2>📝 Änderungshistorie</h2>

<table><tr><td>Datum</td><td>Version</td><td>Änderung</td><td>Autor</td></tr>
</table>|-------|---------|----------|-------|
<table><tr><td>06.01.2025</td><td>1.0</td><td>Initial Version</td><td>Team</td></tr>
</table>
---

<h2>🤝 Commitment</h2>

Mit meiner Arbeit am FreshPlan-Projekt verpflichte ich mich, diese Standards einzuhalten und kontinuierlich zur Verbesserung beizutragen.

<strong>"Wir bauen Software, auf die wir stolz sind!"</strong> 🚀
    
    <div class="footer">
        <p><strong>"Wir bauen Software, auf die wir stolz sind!"</strong> 🚀</p>
        <p>Version 1.0 - Stand: 6.6.2025</p>
        <p class="no-print">
            <a href="WAY_OF_WORKING.md">Markdown Version</a> | 
            <a href="#" onclick="window.print()">Als PDF drucken</a>
        </p>
    </div>
</body>
</html>